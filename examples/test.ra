model User {
	id        Int     @id
	firstName String
	lastName  String
}

model Task {
	id        Int      @id
	title     String
	isDone    Boolean  @default(false)
	createdAt DateTime @default(now)
	updatedAt DateTime @updatedAt
}

query getTasks(filter: { title, isDone }) : findMany
@on(Task)
@permission(isAuth)

query createTask(data: { title }) : create
@on(Task)
@permission(isAuth)

query getTaskById(where: id) : findUnique
@on(Task)
@permission(isAuth)

query updateTaskById(where: id, data: { title, isDone }) : update
@on(Task)
@permission(isAuth, owns)

query deleteTaskById(where: id) : delete
@on(Task)
@permission(isAuth, owns)

component TaskView(task) {
	render(
		<div className="text-blue-500 pb-2 divide-black">
			<div></div>
		</div>
	)
}

page Home @at("/") {
	let tasks = getTasks()

	render(
		<div>
			{
				if (hello == true) then
					if task then
				 		for task in tasks =>
							<div>
								<div>{ "task dsalkkkfasd fjadsklfjads" }</div>
							</div>
			}
		</div>
	)
}
